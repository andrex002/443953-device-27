var writeBtn=document.querySelector(".write-btn"),popupWrite=document.querySelector(".write"),writeCloseBtn=document.querySelector(".close-btn"),nameInput=popupWrite.querySelector("[name=user-name]"),mailInput=popupWrite.querySelector("[name=user-email]"),messageInput=popupWrite.querySelector("[name=user-message]"),writeForm=document.querySelector(".write-form"),mapLink=document.querySelector(".contacts-map-link"),mapBig=document.querySelector(".map-big"),mapCloseBtn=mapBig.querySelector(".close-btn"),isStorageSupport=!0,storageName="",storageMail="";try{storageName=localStorage.getItem("user-name"),storageMail=localStorage.getItem("user-mail")}catch(e){isStorageSupport=!1}writeBtn.addEventListener("click",function(e){e.preventDefault(),popupWrite.classList.add("popup-show"),storageName?(nameInput.value=storageName,mailInput.focus(),storageMail?(mailInput.value=storageMail,messageInput.focus()):mailInput.focus()):nameInput.focus()}),writeCloseBtn.addEventListener("click",function(e){e.preventDefault(),popupWrite.classList.remove("popup-show"),popupWrite.classList.remove("popup-error")}),writeForm.addEventListener("submit",function(e){nameInput.value&&mailInput.value&&messageInput.value?isStorageSupport&&(localStorage.setItem("user-name",nameInput.value),localStorage.setItem("user-mail",mailInput.value)):(e.preventDefault(),popupWrite.classList.remove("popup-error"),popupWrite.offsetWidth=popupWrite.offsetWidth,popupWrite.classList.add("popup-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupWrite.classList.contains("popup-show")&&(popupWrite.classList.remove("popup-show"),popupWrite.classList.remove("popup-error")))}),mapLink.addEventListener("click",function(e){e.preventDefault(),mapBig.classList.add("popup-show")}),mapCloseBtn.addEventListener("click",function(e){e.preventDefault(),mapBig.classList.remove("popup-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapBig.classList.contains("popup-show")&&mapBig.classList.remove("popup-show"))});